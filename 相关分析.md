# 项目需求

1. 用户登录( 看下面权限需求部分 ) 
2. 用户选择 打卡项目 或者 根据用户默认的所属项目进行地图加载 
3. 用户点击打卡，根据地理位置判断是否允许打卡 
  1. 允许则上传 打卡时间和地点
  2. 另外，这里可以加一个备注功能，允许上传 文字 或者 图片，阐明原因及其它内容 

## 定位需求

### 持续定位

1. 每次进入页面重新拉取地址？每次进入页面时，清空 store，然后重新拉取地址。
2. 定位不准确时，如何处理？加一个“重新获取的按钮”。

### 签到状态保存

1. 当天签到之后的状态如何保存？需要保存到全局(持久缓存，先存储到 Vuex，后存储到本地)，每次进入页面的时候，根据时间进行判断按钮是否激活。

## 权限需求

### 正常流程，未登录

1. 登录成功，保存 token 到 uniapp 缓存
2. 将其赋值到 vuex 中 ( 因为 uniapp 使用还是比较复杂 )
3. 根据用户的权限，在路由表中进行匹配，然后生成路由 ( 页面 / tabbar 按钮 )

### 已经登录过

1. 发起请求
2. 检测是否有登录信息
3. 有就静默更新一次用户信息，防止信息过期，然后重新走正常流程 (1 2 3)
4. 返回数据相应

### 使用插件

- [uni-simple-router](http://hhyang.cn/src/router/start/h5/codeRoute.html#%E7%BB%84%E4%BB%B6%E5%BC%8F%E5%AF%BC%E8%88%AA-v-1-2-2)
- [较完整参考文章](https://my.oschina.net/u/4612980/blog/4667286)
- [简单的登录验证](https://ask.dcloud.net.cn/article/35661)
